<div class="col-12 comments-box" [class.d-none]="!clientIsLogin">
  <ul>
<!--    <li style="display: inline-block">-->
<!--      <app-clap-widget [ParentId]="" [ParentType]="1"></app-clap-widget>-->
<!--    </li>-->
<!--    <li style="display: inline-block">-->
<!--      <app-love-interaction [ParentType]="1" [ParentId]=""></app-love-interaction>-->
<!--    </li>-->
    <li style="display: inline-block">
      <i class="far fa-comment"></i> {{comments?.length}} comments
    </li>
  </ul>
  <form class="form-group">
    <textarea #textarea="ngModel"
              type="text" ngModel
              name="comment"
              (keyup.enter)="pressing(textarea)"
              (keydown.enter)="onKeydown($event)"
              placeholder="Your comment..."
              class="form-control rounded-0"
              required
              [ngStyle]="{'border': errorMessage != '' ? '1px solid #f00' : 'none'}"
              [disabled]="isSubmitted || !clientIsLogin"></textarea>
    <span class="invalid-feedback pl-3 mt-2" *ngIf="errorMessage != null" [ngStyle]="{'display': errorMessage != null ? 'block' : 'none'}">{{errorMessage}}</span>
  </form>

  <!-- Comments -->
  <div class="all-comments" [ngStyle]="{'height': comments?.length == 0 ? 0 :  comments?.length == 1 ? '115px' : comments?.length == 2 ? '230px' : '300px'}">
    <div class="sub-comment" *ngFor="let comment of comments; index as i">
      <div class="hidden-button">
        <a class="btn btn-primary btn-sm mr-1 px-1 py-0" (click)="editComment(i)" *ngIf="edit !== i && (comment?.userName == client?.userName)">Edit</a>
        <a class="btn btn-danger btn-sm confirm px-1 py-0" (click)="deleteComment(comment.id)" *ngIf="comment?.userName == client?.userName">Delete</a>
<!--          |   | -->
      </div>
      <div class="row">
        <div class="col-sm-2 col-lg-1 text-center">
          <img class="res-image" src="{{!client?.image ? '../../../../../assets/default-avatar.jpg' : client?.image}}" alt=""/>
        </div>
        <div class="col-sm-10 col-lg-11 mt-2 mt-sm-0">
          <div class="comment-body bg-secondary text-white py-2 px-3">
            <div class="time">
              <span class="border-bottom pb-1">{{comment.userName}} {{comment.date != null ? '( ' + (comment.date.timestamp * 1000 | date) + ' )': ''}}</span>
            </div>
            <p class="comment m-0 mt-2">
              {{comment.body}}
            </p>
            <!--Start Edit Comment Div-->
            <div *ngIf="edit === i">
              <textarea #editTextarea="ngModel"
                        type="text"
                        [(ngModel)]="comment.body"
                        name="comment"
                        placeholder="comment..."
                        class="form-control rounded-0 my-2"
                        required
                        [ngStyle]="{'border': errorMessage != '' ? '1px solid #f00' : 'none'}"></textarea>
              <span class="invalid-feedback pl-3 mt-2" *ngIf="errorEditMessage != null" [ngStyle]="{'display': errorEditMessage  != null ? 'block' : 'none'}">{{errorEditMessage}}</span>
              <button type="button" class="btn btn-sm ml-3" style="background-color: #CCB832;" (click)="saveComment(editTextarea, i)" *ngIf="comment?.userName == client?.userName">{{buttonValue}}</button>
            </div>
          </div>
        </div>
      </div>

<!--      <div *ngIf="edit === i">-->
<!--        <textarea #editTextarea="ngModel"-->
<!--                  type="text"-->
<!--                  [(ngModel)]="comment.body"-->
<!--                  name="comment"-->
<!--                  placeholder="comment..."-->
<!--                  class="form-control rounded-0 my-2"-->
<!--                  required-->
<!--                  [ngStyle]="{'border': errorMessage != '' ? '1px solid #f00' : 'none'}"></textarea>-->
<!--        <span class="invalid-feedback pl-3 mt-2" *ngIf="errorEditMessage != null" [ngStyle]="{'display': errorEditMessage  != null ? 'block' : 'none'}">{{errorEditMessage}}</span>-->
<!--          <button type="button" class="btn btn-sm ml-3" style="background-color: #CCB832;" (click)="saveComment(editTextarea, i)" >{{buttonValue}}</button>-->
<!--      </div>-->
    </div>

  </div>
  <!-- #Comments -->

</div>
<div class="alert alert-warning text-center" [class.d-none]="clientIsLogin">Login if you want to make your comment</div>
